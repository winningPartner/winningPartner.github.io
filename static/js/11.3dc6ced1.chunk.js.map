{"version":3,"sources":["pages/Monthly/Monthly.jsx"],"names":["columns","name","selector","sortable","Monthly","useState","daily","variables","setVariables","loading","setLoading","totalRows","setTotalRows","token","useSelector","store","auth","currentUser","fetchDailyVariables","useCallback","page","params","fetchAPI","fetchDataFromServer","type","then","data","reports","total_count","console","log","setTimeout","catch","error","useEffect","title","className","progressPending","pagination","paginationServer","paginationPerPage","paginationTotalRows","onChangePage","progressComponent"],"mappings":"mMASMA,G,MAAU,CACd,CACEC,KAAM,QACNC,SAAU,OACVC,UAAU,GAEZ,CACEF,KAAM,aACNC,SAAU,aACVC,UAAU,GAEZ,CACEF,KAAM,WACNC,SAAU,WACVC,UAAU,GAEZ,CACEF,KAAM,WACNC,SAAU,WACVC,UAAU,GAEZ,CACEF,KAAM,SACNC,SAAU,SACVC,UAAU,GAEZ,CACEF,KAAM,OACNC,SAAU,OACVC,UAAU,GAEZ,CACEF,KAAM,gBACNC,SAAU,gBACVC,UAAU,GAEZ,CACEF,KAAM,iBACNC,SAAU,iBACVC,UAAU,KA0ECC,UAtEC,WAAO,IAAD,EACcC,mBAAS,CACzCC,MAAO,KAFW,mBACbC,EADa,KACFC,EADE,OAIUH,oBAAS,GAJnB,mBAIbI,EAJa,KAIJC,EAJI,OAKcL,mBAAS,GALvB,mBAKbM,EALa,KAKFC,EALE,KAMdC,EAAQC,aAAY,SAACC,GAAD,OAAWA,EAAMC,KAAKC,YAAYJ,SAEtDK,EAAsBC,uBAC1B,SAACC,GACCV,GAAW,GACX,IAAMW,EAAS,CACbR,MAAOA,EACPO,KAAMA,GAERE,IACGC,oBADH,aAEIC,KAAM,WACHH,IAEJI,MAAK,YAAyC,IAAD,IAArCC,KAAQC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,YACxBC,QAAQC,IAAIH,GACZnB,EAAa,CACXF,MAAOqB,IAETf,EAAagB,GACbG,YAAW,WACTrB,GAAW,KACV,QAEJsB,OAAM,WACLxB,EAAa,CACXF,MAAO,CACL2B,OAAO,UAKjB,CAACpB,IAWH,OAJAqB,qBAAU,WACRhB,EAAoB,KACnB,CAACA,IAGF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOiB,MAAM,YACb,yBAAKC,UAAU,iBACb,kBAAC,IAAD,CACED,MAAM,UACNnC,QAASA,EACT0B,KAAMnB,EAAUD,MAChB+B,gBAAiB5B,EACjB6B,YAAU,EACVC,kBAAgB,EAChBC,kBAAmB,GACnBC,oBAAqB9B,EACrB+B,aArBiB,SAACtB,GACxBF,EAAoBE,IAqBduB,kBAAmB,kBAAC,IAAD","file":"static/js/11.3dc6ced1.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { Row } from \"react-bootstrap\";\r\nimport Title from \"../../components/Title/Title\";\r\nimport { useSelector } from \"react-redux\";\r\nimport DataTable from \"react-data-table-component\";\r\nimport { Circular } from \"../../components/Circular/Circular\";\r\nimport { fetchAPI } from \"../../api\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nconst columns = [\r\n  {\r\n    name: \"Month\",\r\n    selector: \"date\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"Commission\",\r\n    selector: \"commission\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"Net Cash\",\r\n    selector: \"net_cash\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"Deposits\",\r\n    selector: \"deposits\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"Clicks\",\r\n    selector: \"clicks\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"FTDS\",\r\n    selector: \"ftds\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"Registrations\",\r\n    selector: \"registrations\",\r\n    sortable: true,\r\n  },\r\n  {\r\n    name: \"No of deposits\",\r\n    selector: \"no_of_deposits\",\r\n    sortable: true,\r\n  },\r\n];\r\n\r\nconst Monthly = () => {\r\n  const [variables, setVariables] = useState({\r\n    daily: [],\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [totalRows, setTotalRows] = useState(0);\r\n  const token = useSelector((store) => store.auth.currentUser.token);\r\n\r\n  const fetchDailyVariables = useCallback(\r\n    (page) => {\r\n      setLoading(true);\r\n      const params = {\r\n        token: token,\r\n        page: page,\r\n      };\r\n      fetchAPI\r\n        .fetchDataFromServer({\r\n          type: \"monthly\",\r\n          ...params,\r\n        })\r\n        .then(({ data: { reports, total_count } }) => {\r\n          console.log(reports);\r\n          setVariables({\r\n            daily: reports,\r\n          });\r\n          setTotalRows(total_count);\r\n          setTimeout(() => {\r\n            setLoading(false);\r\n          }, 1000);\r\n        })\r\n        .catch(() => {\r\n          setVariables({\r\n            daily: {\r\n              error: true,\r\n            },\r\n          });\r\n        });\r\n    },\r\n    [token]\r\n  );\r\n\r\n  const handleChangePage = (page) => {\r\n    fetchDailyVariables(page);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDailyVariables(1);\r\n  }, [fetchDailyVariables]);\r\n\r\n  return (\r\n    <Row>\r\n      <Title title=\"Reports\" />\r\n      <div className=\"data__wrapper\">\r\n        <DataTable\r\n          title=\"Monthly\"\r\n          columns={columns}\r\n          data={variables.daily}\r\n          progressPending={loading}\r\n          pagination\r\n          paginationServer\r\n          paginationPerPage={20}\r\n          paginationTotalRows={totalRows}\r\n          onChangePage={handleChangePage}\r\n          progressComponent={<Circular />}\r\n        />\r\n      </div>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default Monthly;\r\n"],"sourceRoot":""}